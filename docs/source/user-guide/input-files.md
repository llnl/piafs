# Input Files

PIAFS requires several input files to define the simulation. This page documents all input file formats and parameters.

```{contents}
:local:
:depth: 2
```

## Overview

Input files are ASCII text with a simple keyword-value format. Files use the following structure:

```text
begin
    keyword1   value1
    keyword2   value2
    ...
end
```

## Required Input Files

### solver.inp (Mandatory)

Main simulation parameters.

**Format:**

```text
begin
    ndims           2
    nvars           4
    size            201  201
    ghost           3
    n_iter          1000
    dt              0.001
    time_scheme     rk
    model           navierstokes2d
    hyp_space_scheme 5
    par_space_scheme 2
    op_file_format  binary
    screen_op_iter  100
    file_op_iter    1000
end
```

**Key Parameters:**

| Parameter | Type | Description | Default |
|-----------|------|-------------|---------|
| `ndims` | int | Number of spatial dimensions (1, 2, or 3) | 1 |
| `nvars` | int | Number of solution variables | 1 |
| `size` | int[ndims] | Grid size in each dimension | Must specify |
| `ghost` | int | Number of ghost points | 1 |
| `n_iter` | int | Number of time iterations | 0 |
| `restart_iter` | int | Iteration to restart from | 0 |
| `dt` | double | Time step size | 0.0 |
| `time_scheme` | string | Time integration scheme | euler |
| `model` | string | Physical model | Must specify |
| `hyp_space_scheme` | int | Hyperbolic spatial scheme | 1 |
| `par_space_scheme` | int | Parabolic spatial scheme | 2 |
| `op_file_format` | string | Output format (text/binary/tecplot2d) | text |
| `screen_op_iter` | int | Screen output frequency | 1 |
| `file_op_iter` | int | File output frequency | 1000 |

**Time Integration Schemes:**
- `euler` - Forward Euler (1st order)
- `rk` - Runge-Kutta (2nd, 3rd, or 4th order)

**Physical Models:**
- `euler1d` - 1D Euler equations
- `navierstokes2d` - 2D Navier-Stokes equations
- `navierstokes3d` - 3D Navier-Stokes equations

**Spatial Schemes:**
- `1` - 1st order upwind
- `2` - 2nd order MUSCL
- `3` - 3rd order MUSCL
- `5` - 5th order WENO
- `7` - 5th order CRWENO (compact)
- `9` - 5th order HCWENO (hybrid compact)

### boundary.inp (Mandatory)

Boundary condition specification.

**Format:**

```text
<nb>
<boundary_type>  <dimension>  <face>  [extent]
<boundary_type>  <dimension>  <face>  [extent]
...
```

Where:
- `<nb>` - Number of boundaries
- `<boundary_type>` - Type of boundary (see below)
- `<dimension>` - Spatial dimension (0, 1, ..., ndims-1)
- `<face>` - Face (1 = left/bottom, -1 = right/top)
- `[extent]` - Optional spatial extent

**Example (2D):**

```text
4
periodic       0   1
periodic       0  -1
extrapolate    1   1
extrapolate    1  -1
```

**Boundary Types:**

- `periodic` - Periodic boundary
- `extrapolate` - Zero-gradient extrapolation
- `dirichlet` - Dirichlet (fixed value)
- `slip-wall` - Inviscid slip wall
- `noslip-wall` - Viscous no-slip wall
- `subsonic-inflow` - Subsonic inflow
- `subsonic-outflow` - Subsonic outflow
- `supersonic-inflow` - Supersonic inflow
- `supersonic-outflow` - Supersonic outflow
- `sponge` - Sponge layer

See {doc}`boundary-conditions` for detailed descriptions.

### physics.inp (Mandatory for some models)

Physical model parameters.

**For Euler1D:**

```text
begin
    gamma              1.4
    upwinding          roe
    include_chemistry  no
end
```

**For NavierStokes2D/3D:**

```text
begin
    gamma   1.4
    Pr      0.72
    Re      1000
    T_ref   273.15
end
```

| Parameter | Description | Default |
|-----------|-------------|---------|
| `gamma` | Ratio of specific heats | 1.4 |
| `Pr` | Prandtl number | 0.72 |
| `Re` | Reynolds number | -1 (inviscid) |
| `T_ref` | Reference temperature (K) | 273.15 |
| `upwinding` | Upwinding scheme (roe/rusanov/llf) | roe |

### initial.inp (Mandatory)

Initial solution file. This is typically **not** created by hand, but generated by initialization code provided in each example's `aux/` directory.

**Format:** Binary or ASCII depending on `ip_file_type` in solver.inp. See example `aux/` directories for initialization code templates.

## Optional Input Files

### weno.inp

WENO scheme parameters (only needed if using WENO-type schemes).

```text
begin
    mapped       0
    borges       0
    epsilon      1e-6
    p            2.0
end
```

| Parameter | Description | Default |
|-----------|-------------|---------|
| `mapped` | Use mapped WENO | 0 |
| `borges` | Use Borges weights | 0 |
| `epsilon` | Small number for stability | 1e-6 |
| `p` | Power in WENO weights | 2.0 |

### muscl.inp

MUSCL scheme parameters.

```text
begin
    epsilon  1e-3
    limiter  gmm
end
```

| Parameter | Description | Default |
|-----------|-------------|---------|
| `epsilon` | Limiter parameter | 1e-3 |
| `limiter` | Limiter type (gmm/minmod/vanleer/superbee) | gmm |

### lusolver.inp

Parameters for tridiagonal LU solvers (compact schemes).

```text
begin
    evaluate_norm      1
    maxiter           10
    atol              1e-12
    rtol              1e-10
end
```

### chemistry.inp

Photochemistry parameters.

```text
begin
    lambda_UV  2.48e-7
    theta      0.003
    f_O3       0.005
    Ptot       101325
    Ti         288
end
```

See examples in `Examples/` that use chemistry for complete parameter lists.

## Input/Output Modes

PIAFS supports different I/O modes for parallel simulations:

**In solver.inp:**

```text
input_mode   serial
output_mode  serial
```

Options:
- `serial` - Single process handles I/O
- `parallel N` - N processes handle I/O
- `mpi-io` - Use MPI-IO for parallel I/O

Example with parallel I/O using 4 processes:

```text
input_mode   parallel 4
output_mode  parallel 4
```

## Tips

- Start with provided examples and modify them
- Use descriptive comments (lines starting with `#` are ignored in most parsers)
- Check example `aux/` directories for initialization code templates
- Verify input files with small test runs before production
- Use `op_file_format text` for debugging, `binary` for production

## Next Steps

- {doc}`running-simulations` - How to run with these input files
- {doc}`boundary-conditions` - Detailed boundary condition reference
- {doc}`../examples/index` - Working examples with input files
