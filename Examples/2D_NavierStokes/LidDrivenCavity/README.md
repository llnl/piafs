# Lid-Driven Square Cavity

## Overview

Classic benchmark problem for incompressible viscous flows, simulated here using the compressible Navier-Stokes equations in the low Mach number regime. The flow is driven by a moving top wall in a square cavity with stationary side and bottom walls. This test case is widely used to validate Navier-Stokes solvers at various Reynolds numbers.

## References

- Erturk, E., Corke, T.C., and Gokcol, C., "Numerical Solutions of 2-D Steady Incompressible Driven Cavity Flow at High Reynolds Numbers," International Journal for Numerical Methods in Fluids, 48, 2005, http://dx.doi.org/10.1002/fld.953.
- Ghia, U., Ghia, K.N., Shin, C.T., "High-Re Solutions for Incompressible Flow using the Navier-Stokes Equations and a Multigrid Method," Journal of Computational Physics, 48, 1982, http://dx.doi.org/10.1016/0021-9991(82)90058-4.

## Governing Equations

2D Navier-Stokes equations for compressible flows:

```
d   [ rho   ]   d   [   rho*u    ]    d  [   rho*v   ]
--  [ rho*u ] + --  [rho*u*u + p ] +  -- [  rho*u*v  ] =  Viscous terms
dt  [ rho*v ]   dx  [   rho*u*v  ]    dy [rho*v*v + p]
    [   e   ]       [   (e+p)*u  ]       [  (e+p)v   ]
```

Where:
- `rho` - density
- `u` - x-velocity
- `v` - y-velocity
- `p` - pressure
- `e` - internal energy

Equation of state:
```
         p         1
e = -------  +   - rho * (u^2+v^2)
    gamma-1      2
```

## Domain and Boundary Conditions

- Domain: `0 <= x,y <= 1.0`
- Boundary conditions:
  - Left, bottom, and right walls: No-slip wall
  - Top wall: Moving wall (lid)

## Initial Conditions

See references for details.

Note: This is an incompressible problem being solved using the compressible Navier-Stokes equations in terms of non-dimensional flow variables. The density and pressure are taken such that the speed of sound is 1.0, and the flow velocities specified in the initial and boundary conditions correspond to a characteristic Mach number of 0.1 (thus, they are 0.1 times the values in the above references).

## Required Input Files

- `solver.inp` - General solver parameters
- `boundary.inp` - Boundary conditions
- `physics.inp` - Physical parameters
- `initial.inp` - Initial solution (generated by `aux/init.c`)

See the main PIAFS README for other optional input files.

## How to Run

1. **Generate the initial solution:**
   ```bash
   cd Examples/2D_NavierStokes/LidDrivenCavity
   gcc aux/init.c -lm -o INIT
   ./INIT
   ```

2. **Run the simulation:**
   ```bash
   # Serial mode
   /path/to/piafs/bin/PIAFS-<compiler>-serial solver.inp

   # Parallel mode (e.g., 8 processes)
   mpiexec -n 8 /path/to/piafs/bin/PIAFS-<compiler>-mpi solver.inp
   ```

3. **Visualize results:**
   - If `op_file_format` is set to `text` in `solver.inp`, solution files can be plotted with Gnuplot or any plotting tool
   - Use Python scripts in `Examples/Python/` for binary format output

## Notes

- The code `aux/init.c` generates the initial solution file in the correct format required by the solver
- This is a classical benchmark problem with well-documented reference solutions available in the literature
- The problem is inherently incompressible but is solved using a compressible formulation with low Mach number
- Steady-state solutions can be obtained by running the simulation until convergence
