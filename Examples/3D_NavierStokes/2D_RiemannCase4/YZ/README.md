# 2D Riemann Problem (Case 4) - YZ Plane

## Overview

Simulation of the 2D Riemann problem (Configuration 4) along the YZ plane using the 3D Navier-Stokes solver. This is a classic test case for compressible flow solvers featuring complex wave interactions including shock waves, contact discontinuities, and rarefaction waves. The problem is solved as a 2D problem in the YZ plane, with X as a dummy dimension.

## References

- P. Lax and X.-D. Liu, "Solution of two-dimensional Riemann problems of gas dynamics by positive schemes", SIAM J Sci Comp 19 (1998), 319-340.

## Governing Equations

3D Navier-Stokes equations for compressible flows:

```
d   [ rho   ]   d   [   rho*u    ]   d   [   rho*v    ]   d   [   rho*w    ]
--  [ rho*u ] + --  [rho*u*u + p ] + --  [  rho*u*v   ] + --  [  rho*u*w   ] = viscous terms
dt  [ rho*v ]   dx  [  rho*u*v   ]   dy  [rho*v*v + p ] + dz  [  rho*v*w   ]
    [ rho*w ]       [  rho*u*w   ]       [  rho*v*w   ]       [rho*w*w + p ]
    [   e   ]       [  (e+p)*u   ]       [  (e+p)*v   ]       [  (e+p)*w   ]
```

Where:
- `rho` - density
- `u` - x-velocity
- `v` - y-velocity
- `w` - z-velocity
- `p` - pressure
- `e` - total energy

Equation of state:
```
         p         1
e = -------  +   - rho * (u^2 + v^2 + w^2)
    gamma-1      2
```

## Domain and Boundary Conditions

- Domain: `-0.5 <= x, y, z <= 0.5`
- Boundary conditions: Extrapolate on all boundaries
- X is a dummy dimension since this is effectively a 2D problem in the YZ plane

## Initial Conditions

The 2D Riemann problem consists of four constant states in four quadrants separated by discontinuities at y=0 and z=0. See the reference paper for specific initial values for Case 4.

## Required Input Files

- `solver.inp` - General solver parameters
- `boundary.inp` - Boundary conditions
- `physics.inp` - Physical parameters
- `initial.inp` - Initial solution (generated by `aux/init.C`)

See the main PIAFS README for other optional input files.


## Input File Details

### solver.inp

```
begin
  ndims             3
  nvars             5
  size              21 201 201
  iproc             1 5 5
  ghost             3
  n_iter            250
  time_scheme       rk
  time_scheme_type  ssprk3
  hyp_space_scheme  muscl3
  hyp_interp_type   characteristic
  dt                0.001
  screen_op_iter    1
  file_op_iter      25
  op_file_format    tecplot3d
  op_overwrite      no
  model             navierstokes3d
end
```

| Parameter | Value | Description |
|-----------|-------|-------------|
| ndims | 3 | Number of spatial dimensions |
| nvars | 5 | Number of solution variables |
| size | 21 201 201 | Grid size (for 1D) or grid dimensions separated by spaces (for 2D/3D) |
| iproc | 1 5 5 | Number of MPI ranks in each dimension (for parallel runs) |
| ghost | 3 | Number of ghost points |
| n_iter | 250 | Number of time iterations |
| time_scheme | rk | Time integration scheme (rk=Runge-Kutta, euler=Forward Euler) |
| time_scheme_type | ssprk3 | RK scheme type (44=RK4, ssprk3=SSP-RK3, etc.) |
| hyp_space_scheme | muscl3 | Spatial discretization for hyperbolic terms (weno5, crweno5, muscl3, etc.) |
| hyp_interp_type | characteristic | Interpolation type (characteristic, components) |
| dt | 0.001 | Time step size |
| screen_op_iter | 1 | Iterations between screen output |
| file_op_iter | 25 | Iterations between file output |
| op_file_format | tecplot3d | Output format (text, binary, tecplot2d) |
| op_overwrite | no | Overwrite output files (yes, no) |
| model | navierstokes3d | Physical model (euler1d, navierstokes2d, navierstokes3d) |

### boundary.inp

```
6
periodic         0     1     0      0  -0.5    0.5  -0.5    0.5
periodic         0    -1     0      0  -0.5    0.5  -0.5    0.5
extrapolate      1     1  -0.5    0.5     0      0  -0.5    0.5
extrapolate      1    -1  -0.5    0.5     0      0  -0.5    0.5
extrapolate      2     1  -0.5    0.5  -0.5    0.5     0      0
extrapolate      2    -1  -0.5    0.5  -0.5    0.5     0      0
```

The boundary.inp file format:
- First line: Number of boundary specifications (6)
- Each subsequent line: type dim face xmin xmax

| Parameter | Description |
|-----------|-------------|
| type | Boundary condition type (periodic, extrapolate, noslip, slip-wall, supersonic_inflow, supersonic_outflow, subsonic_inflow, subsonic_outflow) |
| dim | Spatial dimension (0=x, 1=y, 2=z) |
| face | Face identifier (1=right/top/front, -1=left/bottom/back) |
| xmin, xmax | Range where BC applies |

### physics.inp

```
begin
  gamma     1.4
  upwinding rf-char
end
```

| Parameter | Value | Description |
|-----------|-------|-------------|
| gamma | 1.4 | Ratio of specific heats (typically 1.4 for air) |
| upwinding | rf-char | Upwinding scheme (rf-char=Roe-fixed characteristic, rusanov, etc.) |


## How to Run

1. **Generate the initial solution:**
   ```bash
   cd Examples/3D_NavierStokes/2D_RiemannCase4/YZ
   g++ aux/init.C -o INIT
   ./INIT
   ```

2. **Run the simulation:**
   ```bash
   # Serial mode
   /path/to/piafs/bin/PIAFS-<compiler>-serial

   # Parallel mode (e.g., 8 processes)
   mpiexec -n 8 /path/to/piafs/bin/PIAFS-<compiler>-mpi
   ```

3. **Visualize results:**
   - If `op_file_format` is set to `text` in `solver.inp`, solution files can be plotted with Gnuplot or any plotting tool
   - Use Python scripts in `Examples/Python/` for binary format output
   - Tecplot users can use the file `solution.lay` to visualize the solution

## Notes

- The code `aux/init.C` generates the initial solution file in the correct format required by the solver
- This test case is useful for validating the shock-capturing capabilities of numerical schemes
- The problem features complex wave interactions typical of multi-dimensional compressible flows
